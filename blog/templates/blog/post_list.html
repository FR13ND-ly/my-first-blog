{% extends 'blog/base.html' %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static 'css/post_list.css' %}">
    {% if bigimage %}
        <div class="col s12 valign-wrapper">
            {% for post in posts %}
                <div class="big-image card hide" id="post{{post.index}}"  onmouseover="visible_big_image_change({{post.index}})" onmouseout="hidden_big_image_change({{post.index}})">
                    <div class="card-image big_image_photo_container">
                        <a href="{% url 'post_detail' pk=post.pk %}">
                            <img src="/media/{{post.cover}}" class="big_image_the_photo image">
                        </a>
                        <span class="card-title z-depth-5" id="big_image_title">{{ post.title }}</span>
                        <span class="hide-on-med-and-down hide" onclick="next_big_image({{post.index}})" id="previous_big_image{{post.index}}"><i id="big_image_switcher_right" class="material-icons large big_image_switcher">arrow_forward</i></span>
                        <span class="hide-on-med-and-down hide" onclick="previous_big_image({{post.index}})" id="next_big_image{{post.index}}"><i id="big_image_switcher_left" class="material-icons large big_image_switcher">arrow_back</i></span>
                        {% if user.is_staff %}  
                            <a href="{% url 'post_edit' pk=post.pk %}" class="btn-floating btn-large halfway-fab waves-effect waves-light hoverable"><i class="material-icons">edit</i></a>  
                        {% endif %}
                    </div>
                    <a href="{% url 'post_detail' pk=post.pk %}">
                        <div class="card-content s12 hoverable">
                            <p class="black-text text_of_big_image">{{ post.text|striptags|linebreaksbr|truncatewords:30 }}</p>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% for post in posts %}
        <div class="col s12 m12 hide-on-small-only">
            <div class="card horizontal hoverable">
                <div class="card-image valign-wrapper">
                    <img src="/media/{{post.cover}}" class="image" id="article_image">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <a href="{% url 'post_detail' pk=post.pk %}" class="black-text">
                            <div class="section">
                                <h4>{% if post.status %} Privat: {% endif %}{{ post.title }}</h4>
                                <p class="article_text" style="font-size:1.2rem">{{ post.text|striptags|linebreaksbr|truncatewords:35 }}</p>
                            </div>
                            <div class="divider"></div>
                            <div class="section">
                                <p class="article_icons_container"><i class="material-icons red-text tiny black-text article_icon">access_time</i> {{ post.published_date }} |<i class="material-icons red-text tiny black-text article_icon">contacts</i> {{post.author}} | <i class="material-icons red-text tiny black-text article_icon">remove_red_eye</i> {{post.count_of_views}} | <i class="material-icons red-text tiny black-text article_icon">favorite</i> {{post.likes.count}}</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col s12 m12 hide-on-med-and-up">
            <div class="card hoverable">
                <div class="card-image valign-wrapper">
                    <img src="/media/{{post.cover}}" class="image">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <a href="{% url 'post_detail' pk=post.pk %}" class="black-text">
                            <div class="section">
                                <h5>{% if post.status %} Privat: {% endif %}{{ post.title }}</h5>
                                <p class="article_text">{{ post.text|striptags|linebreaksbr|truncatewords:25 }}</p>
                            </div>
                            <div class="divider"></div>
                            <div class="section">
                                <p class="article_icons_container"><i class="material-icons red-text tiny black-text article_icon">access_time</i> {{ post.published_date }} | <i class="material-icons red-text tiny black-text article_icon">remove_red_eye</i> {{post.count_of_views}}</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    <ul class="pagination center">
        {% for i in number_of_pages %}
            <li class="waves-effect {% if i == current_page %} active blue darken-3{% endif %}" ><a href="{% url 'choose_page' lk=i %}"> {{i}} </a></li>
        {% endfor %}
    </ul>
    <script type="text/javascript" src="{% static 'js/post_list.js' %}"></script>
{% endblock %}
