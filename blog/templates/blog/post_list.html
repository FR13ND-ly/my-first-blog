{% extends 'blog/base.html' %}
{% load static %}


{% block content %}
<div class="row hide-on-med-and-up" style="margin-top:1%">
<div class="col container s12">
{% if user.is_active %}
{% if user.is_staff %} <a class="col btn waves-effect waves-light s6" href="{% if ads_page %}{% url 'new_ad' %} {% else %} /post/new {% endif %}"><i class="material-icons">add</i></a></a>{% endif %}
{% else %}
<a class="col btn waves-effect waves-light s6" href="/login">LogheazÄƒ-te</a>
{% endif %}
<a class="col btn waves-effect waves-light s6" style="left:1%" href="/ads">Publicitate</a>
</div>
</div>
<div class="row" >
{% if bigimage %}
    <div class="col s12 valign-wrapper" style="width: 100%;">
        {% for post in posts %}
      <div class="big-image card hide" id="post{{post.index}}" style="height: 88%" onmouseover="visible_big_image_change({{post.index}})" onmouseout="hidden_big_image_change({{post.index}})">
        <div class="card-image " style="height: 460px">
          <a href="{% url 'post_detail' pk=post.pk %}"><img src="/media/{{post.cover}}" style="object-fit: cover; overflow: hidden;height:460px"></a>
          <span class="card-title" style="background-color: rgba(1, 87, 155, 0.5); margin:2%; max-width: 80%;">{{ post.title }}</span>

          <span onclick="next_big_image({{post.index}})" id="previous_big_image{{post.index}}" style="display: none;"><i class="material-icons large" style="color:#fff;font-size: 900%; cursor: pointer; right: 2%; position: absolute; top:40%" >arrow_forward</i></span>
          <span onclick="previous_big_image({{post.index}})" id="next_big_image{{post.index}}" style="display: none; "><i class="material-icons large" style="color:#fff;font-size: 900%; cursor: pointer; left: 2%; position: absolute; top:40%" >arrow_back</i></span>
        {% if user.is_staff %}  <a href="{% url 'post_edit' pk=post.pk %}" class="btn-floating btn-large halfway-fab waves-effect waves-light "><i class="material-icons">edit</i></a>  {% endif %}
        </div>
       <a href="{% url 'post_detail' pk=post.pk %}"> <div class="card-content {% if profile.darktheme %}  blue-grey darken-3 {% endif%}">
          <p class="black-text">{{ post.text|striptags|linebreaksbr|truncatewords:30 }}</p>
        </div></a>

      </div>
        {% endfor %}
    </div>
    
{% endif %}
    {% for post in posts %}
    <div class="col s12 m12">
            <div class="card horizontal hoverable">
                <div class="card-image valign-wrapper">
                    <img src="/media/{{post.cover}}" style="width: 150px; height: 250px; object-fit: cover; overflow: hidden;">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <a href="{% url 'post_detail' pk=post.pk %}" class="black-text">
                        <div class="section">
                        <h5>{{ post.title }}</h5>
                        <p class="flow-text">{{ post.text|striptags|linebreaksbr|truncatewords:40 }}</p>
                    </div>
                        <div class="divider"></div>
                        <div class="section">
                        <p style="display: flex" ><i class="material-icons red-text tiny black-text" style="line-height: inherit;padding-right: 0.5rem">access_time</i> {{ post.published_date }} |<i class="material-icons red-text tiny black-text" style="line-height: inherit;padding-right: 0.5rem;padding-left: 0.5rem">contacts</i> {{post.author}} |  {{post.count_of_views}} <i class="material-icons red-text tiny black-text" style="line-height: inherit;padding-left: 0.5rem">remove_red_eye</i></p></div>
                        </a>
                    </div>
                </div>
            </div>
        
    </div>
    {% endfor %}
    <ul class="pagination center">
        {% for i in number_of_pages %}
            <li class="waves-effect {% if i == current_page %} active blue darken-3{% endif %}" ><a href="{% url 'choose_page' lk=i %}"> {{i}} </a></li>
        {% endfor %}
    </ul>
    </div>
    <script type="text/javascript" src="{% static 'js/post_list.js' %}"></script>
{% endblock %}
